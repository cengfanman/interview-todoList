# ⚡ 快速开始 - 任务到期提醒功能

## 🎯 5分钟快速体验

### 步骤 1：启动项目

```bash
cd /Users/yingxuegu/Documents/project/tests/interview-todolist
docker-compose up --build
```

等待构建完成，访问：http://localhost:8888

---

### 步骤 2：登录系统

使用测试账号或注册新账号：

```
用户名：testuser
邮箱：test@example.com
密码：password123
```

---

### 步骤 3：创建测试任务

1. 点击右上角 **"New Task"** 按钮
2. 填写表单：
   ```
   标题：测试到期提醒
   团队：选择任意团队
   截止时间：选择"当前时间 + 6分钟"
   ```
3. 点击 **"Create"**

---

### 步骤 4：启用任务提醒

在任务列表页面右上角，找到：

```
🔔 任务提醒 [关]
```

点击开关，切换到：

```
🔔 任务提醒 [开]
```

---

### 步骤 5：授予浏览器通知权限

此时会弹出蓝色提示框：

```
┌─────────────────────────────────────────┐
│ ℹ️ 启用桌面通知                          │
│ ─────────────────────────────────────── │
│ 启用桌面通知后，即使浏览器在后台运行，   │
│ 您也能收到任务到期提醒。                 │
│ [ 授予通知权限 ]                         │
└─────────────────────────────────────────┘
```

点击 **"授予通知权限"** → 在浏览器权限对话框中点击 **"允许"**

---

### 步骤 6：等待提醒

约等待 **1分钟** 后，您会看到：

#### 📱 页面内通知（右上角）

```
┌────────────────────────────────────┐
│ ⏰ 任务即将到期                     │
│ ───────────────────────────────── │
│ 测试到期提醒                        │
│ 还有 5分钟 截止！                   │
│ 截止时间：2025-11-22 21:30         │
└────────────────────────────────────┘
```

#### 🖥️ 桌面通知（系统通知中心）

```
┌──────────────────────────────┐
│  TodoList                    │
│  任务即将到期                 │
│  测试到期提醒                 │
│  还有 5分钟 截止！            │
└──────────────────────────────┘
```

---

## 🎨 截图演示

### 1. 任务提醒开关

```
┌────────────────────────────────────────────────────────┐
│  My Tasks              [ 🔔 任务提醒 开/关 ] [ New Task ] │
└────────────────────────────────────────────────────────┘
```

### 2. 通知权限提示

```
┌──────────────────────────────────────────────────────┐
│ ℹ️ 启用桌面通知                         [ ✕ ]         │
├──────────────────────────────────────────────────────┤
│ 启用桌面通知后，即使浏览器在后台运行，                │
│ 您也能收到任务到期提醒。                              │
│                                                      │
│                    [ 授予通知权限 ]                   │
└──────────────────────────────────────────────────────┘
```

### 3. 任务列表（带子任务标签）

```
┌─────────────────────────────────────────────────────────┐
│ Title                    Status      Priority  Assignee │
├─────────────────────────────────────────────────────────┤
│ 完成项目文档 [2 subtasks] PENDING    HIGH     yingxuegu │
│ 测试到期提醒              IN_PROGRESS URGENT   yingxuegu │
└─────────────────────────────────────────────────────────┘
```

---

## 🔔 提醒时间表

创建一个截止时间为"当前时间 + 1小时"的任务后：

| 时间点 | 剩余时间 | 会收到的提醒 |
|--------|---------|-------------|
| T+0分钟 | 60分钟 | 🔕 无提醒 |
| T+30分钟 | 30分钟 | ⚠️ "还有 30分钟 截止！" |
| T+45分钟 | 15分钟 | ⚠️ "还有 15分钟 截止！" |
| T+55分钟 | 5分钟 | 🚨 "还有 5分钟 截止！"（不会自动关闭） |
| T+60分钟+ | 逾期 | 🔴 "任务已逾期"（每天一次） |

---

## 💡 实用技巧

### 技巧 1：测试不同时间点的提醒

创建多个任务，设置不同的截止时间：

```
任务1：当前时间 + 1小时   → 测试1小时提醒
任务2：当前时间 + 31分钟  → 测试30分钟提醒
任务3：当前时间 + 16分钟  → 测试15分钟提醒
任务4：当前时间 + 6分钟   → 测试5分钟提醒
```

### 技巧 2：测试逾期提醒

1. 创建任务，截止时间设为"过去的时间"
2. 刷新页面或切换路由
3. 会立即看到红色逾期通知

### 技巧 3：临时关闭提醒

如果正在开会或演示，不想被打扰：
1. 点击 **任务提醒开关** 切换到"关"
2. 所有提醒暂停
3. 需要时再重新打开

### 技巧 4：只用页面通知，不用桌面通知

1. 不点击"授予通知权限"按钮
2. 或者在浏览器设置中拒绝通知权限
3. 只会显示页面内通知（右上角弹出）

---

## 🐛 如果遇到问题

### 问题 1：看不到任务提醒开关？

**解决**：
- 确保在"My Tasks"页面，不是"Teams"页面
- 开关在页面右上角，"New Task"按钮左边

### 问题 2：没有收到桌面通知？

**检查清单**：
- ✅ 点击了"授予通知权限"按钮
- ✅ 在浏览器权限对话框中点击了"允许"
- ✅ 操作系统的通知功能已启用
- ✅ 浏览器不在静音模式

**验证方法**：
```javascript
// 在浏览器控制台运行
Notification.permission
// 应该返回 "granted"
```

### 问题 3：重复收到同一个提醒？

**解决**：
- 关闭重复的浏览器标签页
- 只保留一个标签页打开
- 刷新页面

### 问题 4：时间不对？

**检查时区**：
```bash
# 检查后端容器时区
docker exec -it todolist-backend date
# 应该显示 CST (China Standard Time)

# 检查MySQL时区
docker exec -it todolist-mysql mysql -u root -proot_password -e "SELECT NOW();"
# 应该显示北京时间
```

如果时区不对，重新构建：
```bash
docker-compose down
docker-compose up --build
```

---

## 📱 移动端支持

### iOS Safari
- ✅ 页面内通知正常
- ⚠️ 桌面通知支持有限（需要添加到主屏幕）

### Android Chrome
- ✅ 页面内通知正常
- ✅ 桌面通知正常（需授权）

### 微信内置浏览器
- ✅ 页面内通知正常
- ❌ 不支持桌面通知

---

## 🎬 下一步

体验完提醒功能后，您可以：

1. **探索子任务功能**
   - 在任务详情页面点击"Add Subtask"
   - 创建子任务并设置截止时间
   - 子任务也会收到到期提醒！

2. **查看历史记录**
   - 打开任务详情
   - 滚动到"History"部分
   - 查看所有操作记录

3. **测试团队协作**
   - 创建新团队
   - 邀请成员（需要注册多个账号）
   - 为团队成员分配任务

4. **尝试筛选和排序**
   - 按状态筛选
   - 按优先级排序
   - 按截止时间排序

---

## 📚 详细文档

- **[FRONTEND_NOTIFICATION.md](./FRONTEND_NOTIFICATION.md)** - 完整功能文档
  - 配置选项
  - 浏览器兼容性
  - 性能优化
  - 常见问题详解

- **[TESTING_GUIDE.md](./TESTING_GUIDE.md)** - 后端定时任务测试
- **[README.md](./README.md)** - 项目总览

---

## 💬 反馈

如有问题或建议，欢迎反馈！

**已实现功能**：
- ✅ 前端实时检查（每分钟）
- ✅ 多时间点提醒（1h/30m/15m/5m）
- ✅ 页面内通知
- ✅ 浏览器桌面通知
- ✅ 逾期提醒
- ✅ 防重复提醒
- ✅ 可开关功能

**未来可能添加**：
- 🔮 自定义提醒时间
- 🔮 声音提醒
- 🔮 免打扰模式
- 🔮 提醒历史记录
- 🔮 WebSocket 实时推送

---

**祝您使用愉快！** 🎉

